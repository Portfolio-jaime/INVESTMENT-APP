# Default values for ml-prediction service
replicaCount: 1

image:
  repository: jaimehenao8126/trii-ml-prediction
  tag: "latest"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 8004
  targetPort: 8004

resources:
  limits:
    cpu: 500m
    memory: 1Gi
  requests:
    cpu: 200m
    memory: 512Mi

config:
  colombianMarkets: true
  apiPort: 8004
  redisHost: redis-service
  timescaleHost: postgres-service
  # MCP Configuration
  mcpServerUrl: "http://mcp-server:8080"
  mcpContextProviders: "market-data,analysis-engine,portfolio-manager"
  # LLM Settings
  openaiApiKey: ""
  ollamaEndpoint: "http://ollama-service:11434"
  llamaCppPath: "/models/llama"
  # Colombian Market Parameters
  trmApiUrl: "https://www.dane.gov.co"
  localMarketDataPath: "/data/colombian-markets"
  # Risk Assessment Thresholds
  maxRiskScore: 0.8
  minConfidenceLevel: 0.7
  # Portfolio Optimization Constraints
  maxPortfolioWeight: 0.2
  minDiversificationRatio: 0.3
  # Feature Flags
  enableMcpIntegration: false
  enableHybridLlm: false
  enableRiskAssessment: true
  enablePortfolioOptimization: false

volumes:
  - name: model-storage
    persistentVolumeClaim:
      claimName: model-pvc
  - name: market-data-storage
    persistentVolumeClaim:
      claimName: market-data-pvc

ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
    nginx.ingress.kubernetes.io/cors-allow-origin: "*"
    nginx.ingress.kubernetes.io/cors-allow-methods: "GET, POST, PUT, DELETE, OPTIONS"
    nginx.ingress.kubernetes.io/cors-allow-headers: "DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization"
    nginx.ingress.kubernetes.io/enable-cors: "true"
  hosts:
    - host: ml-prediction.trii-platform.local
      paths:
        - path: /
          pathType: Prefix
  tls: []