# Business Intelligence Dashboard for TRII Platform
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-business-dashboards
  namespace: trii-monitoring
data:
  trii-business-metrics.json: |
    {
      "dashboard": {
        "id": null,
        "title": "TRII Business Intelligence",
        "tags": ["trii", "business", "revenue", "users"],
        "style": "dark",
        "timezone": "America/Bogota",
        "refresh": "1m",
        "time": {
          "from": "now-24h",
          "to": "now"
        },
        "panels": [
          {
            "id": 1,
            "title": "Active Users",
            "type": "stat",
            "targets": [
              {
                "expr": "trii_active_users_total",
                "legendFormat": "Active Users"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "thresholds": {
                  "steps": [
                    {"color": "red", "value": 0},
                    {"color": "yellow", "value": 100},
                    {"color": "green", "value": 1000}
                  ]
                },
                "unit": "short"
              }
            },
            "gridPos": {"h": 8, "w": 6, "x": 0, "y": 0}
          },
          {
            "id": 2,
            "title": "Total Assets Under Management",
            "type": "stat",
            "targets": [
              {
                "expr": "trii_aum_total_usd",
                "legendFormat": "AUM"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "thresholds": {
                  "steps": [
                    {"color": "green", "value": 0}
                  ]
                },
                "unit": "currencyUSD"
              }
            },
            "gridPos": {"h": 8, "w": 6, "x": 6, "y": 0}
          },
          {
            "id": 3,
            "title": "Daily Trading Volume",
            "type": "stat",
            "targets": [
              {
                "expr": "increase(trii_trading_volume_usd_total[1d])",
                "legendFormat": "Volume"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "unit": "currencyUSD"
              }
            },
            "gridPos": {"h": 8, "w": 6, "x": 12, "y": 0}
          },
          {
            "id": 4,
            "title": "New Registrations (24h)",
            "type": "stat",
            "targets": [
              {
                "expr": "increase(trii_user_registrations_total[24h])",
                "legendFormat": "New Users"
              }
            ],
            "gridPos": {"h": 8, "w": 6, "x": 18, "y": 0}
          },
          {
            "id": 5,
            "title": "Revenue Trends",
            "type": "graph",
            "targets": [
              {
                "expr": "rate(trii_revenue_usd_total[1h]) * 3600",
                "legendFormat": "Hourly Revenue"
              }
            ],
            "yAxes": [
              {
                "label": "USD/hour",
                "min": 0
              }
            ],
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8}
          },
          {
            "id": 6,
            "title": "Portfolio Performance Distribution",
            "type": "piechart",
            "targets": [
              {
                "expr": "trii_portfolio_performance_buckets",
                "legendFormat": "{{ performance_range }}"
              }
            ],
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8}
          },
          {
            "id": 7,
            "title": "Investment Categories",
            "type": "bargauge",
            "targets": [
              {
                "expr": "trii_investments_by_category",
                "legendFormat": "{{ category }}"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "unit": "currencyUSD"
              }
            },
            "gridPos": {"h": 8, "w": 8, "x": 0, "y": 16}
          },
          {
            "id": 8,
            "title": "Risk Distribution",
            "type": "piechart",
            "targets": [
              {
                "expr": "trii_risk_distribution",
                "legendFormat": "{{ risk_level }}"
              }
            ],
            "gridPos": {"h": 8, "w": 8, "x": 8, "y": 16}
          },
          {
            "id": 9,
            "title": "Average Portfolio Return",
            "type": "gauge",
            "targets": [
              {
                "expr": "trii_avg_portfolio_return_percent",
                "legendFormat": "Return %"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "min": -20,
                "max": 50,
                "unit": "percent",
                "thresholds": {
                  "steps": [
                    {"color": "red", "value": -10},
                    {"color": "yellow", "value": 0},
                    {"color": "green", "value": 10}
                  ]
                }
              }
            },
            "gridPos": {"h": 8, "w": 8, "x": 16, "y": 16}
          }
        ]
      }
    }

  trii-ml-performance.json: |
    {
      "dashboard": {
        "id": null,
        "title": "TRII ML & AI Performance",
        "tags": ["trii", "ml", "ai", "predictions"],
        "style": "dark",
        "timezone": "America/Bogota",
        "refresh": "30s",
        "time": {
          "from": "now-6h",
          "to": "now"
        },
        "panels": [
          {
            "id": 1,
            "title": "Prediction Accuracy",
            "type": "gauge",
            "targets": [
              {
                "expr": "trii_ml_prediction_accuracy_percent",
                "legendFormat": "Accuracy"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "min": 0,
                "max": 100,
                "unit": "percent",
                "thresholds": {
                  "steps": [
                    {"color": "red", "value": 0},
                    {"color": "yellow", "value": 70},
                    {"color": "green", "value": 85}
                  ]
                }
              }
            },
            "gridPos": {"h": 8, "w": 6, "x": 0, "y": 0}
          },
          {
            "id": 2,
            "title": "Model Inference Time",
            "type": "stat",
            "targets": [
              {
                "expr": "histogram_quantile(0.95, trii_ml_inference_duration_seconds)",
                "legendFormat": "95th percentile"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "unit": "s"
              }
            },
            "gridPos": {"h": 8, "w": 6, "x": 6, "y": 0}
          },
          {
            "id": 3,
            "title": "Predictions per Hour",
            "type": "stat",
            "targets": [
              {
                "expr": "rate(trii_ml_predictions_total[1h]) * 3600",
                "legendFormat": "Predictions/hour"
              }
            ],
            "gridPos": {"h": 8, "w": 6, "x": 12, "y": 0}
          },
          {
            "id": 4,
            "title": "Model Confidence Score",
            "type": "gauge",
            "targets": [
              {
                "expr": "trii_ml_confidence_score_avg",
                "legendFormat": "Confidence"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "min": 0,
                "max": 1,
                "thresholds": {
                  "steps": [
                    {"color": "red", "value": 0},
                    {"color": "yellow", "value": 0.6},
                    {"color": "green", "value": 0.8}
                  ]
                }
              }
            },
            "gridPos": {"h": 8, "w": 6, "x": 18, "y": 0}
          },
          {
            "id": 5,
            "title": "Feature Engineering Pipeline",
            "type": "graph",
            "targets": [
              {
                "expr": "rate(trii_feature_processing_duration_seconds[5m])",
                "legendFormat": "Feature Processing Time"
              }
            ],
            "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8}
          },
          {
            "id": 6,
            "title": "Model Versions Performance",
            "type": "graph",
            "targets": [
              {
                "expr": "trii_model_accuracy_by_version",
                "legendFormat": "{{ model_version }}"
              }
            ],
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8}
          },
          {
            "id": 7,
            "title": "Data Quality Metrics",
            "type": "stat",
            "targets": [
              {
                "expr": "trii_data_quality_score",
                "legendFormat": "Quality Score"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "min": 0,
                "max": 100,
                "unit": "percent"
              }
            },
            "gridPos": {"h": 4, "w": 6, "x": 0, "y": 16}
          },
          {
            "id": 8,
            "title": "Model Drift Detection",
            "type": "stat",
            "targets": [
              {
                "expr": "trii_model_drift_score",
                "legendFormat": "Drift Score"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "thresholds": {
                  "steps": [
                    {"color": "green", "value": 0},
                    {"color": "yellow", "value": 0.3},
                    {"color": "red", "value": 0.7}
                  ]
                }
              }
            },
            "gridPos": {"h": 4, "w": 6, "x": 6, "y": 16}
          }
        ]
      }
    }

  trii-security-compliance.json: |
    {
      "dashboard": {
        "id": null,
        "title": "TRII Security & Compliance",
        "tags": ["trii", "security", "compliance", "audit"],
        "style": "dark",
        "timezone": "America/Bogota",
        "refresh": "1m",
        "time": {
          "from": "now-24h",
          "to": "now"
        },
        "panels": [
          {
            "id": 1,
            "title": "Failed Login Attempts",
            "type": "stat",
            "targets": [
              {
                "expr": "increase(trii_failed_login_attempts_total[24h])",
                "legendFormat": "Failed Logins"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "color": {
                  "mode": "thresholds"
                },
                "thresholds": {
                  "steps": [
                    {"color": "green", "value": 0},
                    {"color": "yellow", "value": 10},
                    {"color": "red", "value": 50}
                  ]
                }
              }
            },
            "gridPos": {"h": 8, "w": 6, "x": 0, "y": 0}
          },
          {
            "id": 2,
            "title": "Suspicious Activity Alerts",
            "type": "stat",
            "targets": [
              {
                "expr": "trii_security_alerts_total",
                "legendFormat": "Alerts"
              }
            ],
            "gridPos": {"h": 8, "w": 6, "x": 6, "y": 0}
          },
          {
            "id": 3,
            "title": "API Rate Limiting",
            "type": "graph",
            "targets": [
              {
                "expr": "rate(trii_api_requests_total[5m])",
                "legendFormat": "{{ endpoint }}"
              }
            ],
            "yAxes": [
              {
                "label": "Requests/sec"
              }
            ],
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0}
          },
          {
            "id": 4,
            "title": "Compliance Score",
            "type": "gauge",
            "targets": [
              {
                "expr": "trii_compliance_score_percent",
                "legendFormat": "Compliance"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "min": 0,
                "max": 100,
                "unit": "percent",
                "thresholds": {
                  "steps": [
                    {"color": "red", "value": 0},
                    {"color": "yellow", "value": 80},
                    {"color": "green", "value": 95}
                  ]
                }
              }
            },
            "gridPos": {"h": 8, "w": 6, "x": 0, "y": 8}
          },
          {
            "id": 5,
            "title": "Data Encryption Status",
            "type": "stat",
            "targets": [
              {
                "expr": "trii_data_encryption_enabled",
                "legendFormat": "Encrypted"
              }
            ],
            "fieldConfig": {
              "defaults": {
                "mappings": [
                  {"type": "value", "value": "0", "text": "DISABLED"},
                  {"type": "value", "value": "1", "text": "ENABLED"}
                ],
                "color": {
                  "mode": "thresholds"
                },
                "thresholds": {
                  "steps": [
                    {"color": "red", "value": 0},
                    {"color": "green", "value": 1}
                  ]
                }
              }
            },
            "gridPos": {"h": 8, "w": 6, "x": 6, "y": 8}
          },
          {
            "id": 6,
            "title": "Audit Log Volume",
            "type": "graph",
            "targets": [
              {
                "expr": "rate(trii_audit_events_total[5m])",
                "legendFormat": "{{ event_type }}"
              }
            ],
            "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8}
          }
        ]
      }
    }